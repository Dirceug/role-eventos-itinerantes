import{u as S,r,U as q,j as a}from"./index-CX-r_TzI.js";import{J as s}from"./joi-browser.min-DHFZ_MUq.js";import{B as A}from"./ButtonGrande-fEAYhVl3.js";import{L as o}from"./LabelInput-CMyMSPkc.js";const E=s.object({displayName:s.string().pattern(/^[a-zA-Z]{3,} [a-zA-Z]{3,}$/).required().label("Nome").messages({"string.pattern.base":"{#label} deve conter nome e sobrenome, cada um com pelo menos 3 letras.","string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),email:s.string().email({tlds:{allow:!1}}).required().label("Email").messages({"string.email":"{#label} deve ser um email válido.","string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),password:s.string().min(8).max(64).pattern(/(?=.*[a-z])/).pattern(/(?=.*[A-Z])/).pattern(/(?=.*\d)/).pattern(/(?=.*[@$!%*?&])/).required().label("Senha").messages({"string.min":"{#label} deve ter pelo menos 8 caracteres.","string.max":"{#label} deve ter no máximo 64 caracteres.","string.pattern.base":"{#label} deve conter letras maiúsculas, minúsculas, números e caracteres especiais.","string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),confirmPassword:s.string().valid(s.ref("password")).required().label("Repetir Senha").messages({"any.only":"As senhas não coincidem.","string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),cpf:s.string().pattern(/^\d{3}\.\d{3}\.\d{3}-\d{2}$/).required().label("CPF").messages({"string.pattern.base":"{#label} deve estar no formato 123.456.789-10.","string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),apelido:s.string().min(3).allow("").label("Apelido").messages({"string.min":"{#label} deve ter pelo menos 3 caracteres."})});function k(){const b=S(),{setUser:v}=r.useContext(q),[n,h]=r.useState(""),[i,y]=r.useState(""),[d,f]=r.useState(""),[m,x]=r.useState(""),[p,C]=r.useState(""),[c,w]=r.useState(""),[t,u]=r.useState({}),j=()=>{const e=E.validate({displayName:n,email:i,password:d,confirmPassword:m,cpf:p,apelido:c},{abortEarly:!1});if(!e.error)return u({}),!0;const l={};for(let g of e.error.details)l[g.path[0]]=g.message;return u(l),!1},N=async()=>{if(j())try{const e=await fetch("${process.env.REACT_APP_API_URL}/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:n,email:i,password:d,cpf:p,apelido:c})});if(e.ok){const l=await e.json();v(l),b("/cadastro/atualizarendereco")}else console.error("Erro ao registrar usuário")}catch(e){console.error("Erro ao registrar usuário:",e)}},P=e=>e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2");return a.jsxs("div",{className:"paginaCadastro",children:[a.jsx("h1",{className:"tituloLogin",children:"Cadastrar Usuário"}),a.jsxs("div",{className:"cinquentaPorCento",children:[a.jsx(o,{label:"Nome:",type:"text",placeholder:"Nome",value:n,onChange:e=>h(e.target.value),error:t.displayName}),a.jsx(o,{label:"Email:",type:"email",placeholder:"nome@email.com",value:i,onChange:e=>y(e.target.value),error:t.email}),a.jsx(o,{label:"Senha:",type:"password",placeholder:"********",value:d,onChange:e=>f(e.target.value),error:t.password}),a.jsx(o,{label:"Repetir Senha:",type:"password",placeholder:"********",value:m,onChange:e=>x(e.target.value),error:t.confirmPassword}),a.jsx(o,{label:"CPF:",type:"text",placeholder:"123.456.789-10",value:p,onChange:e=>C(e.target.value),error:t.cpf,mask:P}),a.jsx(o,{label:"Apelido (opcional):",type:"text",placeholder:"Apelido",value:c,onChange:e=>w(e.target.value),error:t.apelido})]}),a.jsx(A,{onClick:N,className:"invertido",children:"Registrar Usuário"})]})}export{k as default};
