const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Navbar-CfGvtLrd.js","assets/index-CX-r_TzI.js","assets/index-9u-HInou.css","assets/index-e84cf44d-BDGxaeLU.js","assets/Navbar-C1qii9T-.css","assets/CurtidasButton-uX_rC8fV.js","assets/CurtidasButton-D6iamtkJ.css","assets/CardapioButton-BhxQSxD-.js","assets/CardapioButton-BHVUfvmT.css"])))=>i.map(i=>d[i]);
import{r as t,U as v,u as x,b as d,j as e,_ as o}from"./index-CX-r_TzI.js";import{e as j}from"./eventoBase-Dg98OOL6.js";const _=t.lazy(()=>o(()=>import("./Navbar-CfGvtLrd.js"),__vite__mapDeps([0,1,2,3,4]))),E=t.lazy(()=>o(()=>import("./CurtidasButton-uX_rC8fV.js"),__vite__mapDeps([5,1,2,6]))),N=t.lazy(()=>o(()=>import("./CardapioButton-BhxQSxD-.js"),__vite__mapDeps([7,1,2,8]))),f=()=>{const[l,h]=t.useState([]),{user:n}=t.useContext(v),i=x();t.useEffect(()=>{(async()=>{const a=d.get("authToken");if(!a){console.error("No token found");return}try{const c=await(await fetch("http://52.14.179.20/events",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}})).json();h(Array.isArray(c)?c:[])}catch(r){console.error("Error fetching events:",r)}})()},[]);const p=s=>{i(`/event/${s}/details`)},m=(s,a)=>{a.stopPropagation(),i("/lista-barracas",{state:{eventId:s,userId:n?n.uid:null}})},u=d.get("authToken");return e.jsxs(t.Suspense,{fallback:e.jsx("div",{children:"Carregando..."}),children:[e.jsx(_,{user:n,token:u}),e.jsx("div",{className:"upcoming-events-container",children:l.map(s=>e.jsx("div",{className:"event",style:{backgroundImage:`url(${s.fotoUrl||j})`},onClick:()=>p(s._id),children:e.jsxs("div",{className:"event-overlay",children:[e.jsxs("div",{className:"event-content",children:[e.jsx("div",{className:"event-title",children:e.jsx("h2",{children:s.nome})}),e.jsxs("div",{className:"event-description",children:[e.jsx("p",{className:"event-descricao",children:s.descricao.length>244?`${s.descricao.substring(0,241)}...`:s.descricao}),e.jsx("p",{children:e.jsx("br",{})}),e.jsxs("p",{children:[s.endereco.cidade," - ",s.endereco.estado]})]}),e.jsx("div",{className:"event-details",children:s.dataEvento&&s.dataEvento.map((a,r)=>e.jsxs("div",{className:"event-date",children:[e.jsx("p",{className:"date",children:new Date(a.dataAbertura).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),e.jsx("p",{className:"time",children:a.horaAbertura}),e.jsx("p",{className:"time",children:a.horaFechamento})]},r))})]}),e.jsx("div",{className:"event-likes",onClick:a=>a.stopPropagation(),children:e.jsx(E,{eventId:s._id,initialLikesCount:s.numeroFavoritos})}),e.jsx("div",{className:"event-barracas",onClick:a=>m(s._id,a),children:e.jsx(N,{label:"Ver Barracas",size:"40px"})})]})},s._id))})]})};export{f as default};
