const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CurtidasButton-uX_rC8fV.js","assets/index-CX-r_TzI.js","assets/index-9u-HInou.css","assets/CurtidasButton-D6iamtkJ.css","assets/GerenciarResponsaveisModal-C2rQmYa-.js","assets/index-DQ8UN3GZ.js","assets/GerenciarResponsaveisModal-DXLabYpY.css","assets/Navbar-CfGvtLrd.js","assets/index-e84cf44d-BDGxaeLU.js","assets/Navbar-C1qii9T-.css","assets/EditarButton-BGLe7PRA.js","assets/CardapioButton-BHVUfvmT.css"])))=>i.map(i=>d[i]);
import{r as t,c as f,U as E,j as e,b as p,_ as h}from"./index-CX-r_TzI.js";import{e as k}from"./eventoBase-Dg98OOL6.js";import{M as _}from"./index-DQ8UN3GZ.js";t.lazy(()=>h(()=>import("./CurtidasButton-uX_rC8fV.js"),__vite__mapDeps([0,1,2,3])));const C=t.lazy(()=>h(()=>import("./GerenciarResponsaveisModal-C2rQmYa-.js"),__vite__mapDeps([4,1,2,5,6])));_.setAppElement("#root");const y=({isOpen:c,onRequestClose:l,eventId:r})=>{const[a,v]=t.useState(null),{user:x}=f.useContext(E),[i,m]=t.useState(!1),d=t.useRef(null);if(t.useEffect(()=>{r&&(async()=>{const n=p.get("authToken");if(!n){console.error("No token found");return}try{const u=await(await fetch(`http://52.14.179.20/events/${r}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}})).json();v(u)}catch(o){console.error("Error fetching event:",o)}})()},[r]),t.useEffect(()=>{c&&d.current&&d.current.focus()},[c]),!a)return e.jsx("div",{children:"Loading..."});const j=()=>{l(),setTimeout(()=>{m(!0)},300)};return e.jsxs(e.Fragment,{children:[e.jsx(_,{isOpen:c,onRequestClose:l,className:"full-screen-modal",overlayClassName:"modal-overlay",children:e.jsxs("div",{className:"modal-content",ref:d,tabIndex:-1,children:[e.jsx("button",{className:"close-button orange",onClick:l,children:"X"}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"detalhe-evento-container",children:[e.jsx("div",{className:"detalhe-evento-foto",children:e.jsx("img",{src:a.fotoUrl,alt:a.nome})}),e.jsxs("div",{className:"detalhe-evento-info",children:[e.jsx("h2",{children:a.nome}),e.jsx("div",{className:"organizador",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Organizado por: "}),a.organizadores&&a.organizadores.map((s,n,o)=>e.jsxs(f.Fragment,{children:[s.nome,n<o.length-1?", ":""]},s._id))]})}),e.jsx("p",{children:a.descricao})]}),e.jsx("div",{className:"detalhe-evento-footer",children:e.jsxs("div",{className:"edit-buttons",children:[e.jsx("button",{onClick:()=>alert("Abrir modal para editar detalhes do evento"),children:"Detalhes do evento"}),e.jsx("button",{onClick:j,children:"Adicionar responsável pelo evento"}),e.jsx("button",{onClick:()=>alert("Abrir modal para adicionar barraca"),children:"Adicionar barraca"})]})})]})})]})}),e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Carregando..."}),children:e.jsx(C,{isOpen:i,onRequestClose:()=>m(!1),eventId:r,organizadores:a.organizadores})})]})},A=t.lazy(()=>h(()=>import("./Navbar-CfGvtLrd.js"),__vite__mapDeps([7,1,2,8,9]))),z=t.lazy(()=>h(()=>import("./CurtidasButton-uX_rC8fV.js"),__vite__mapDeps([0,1,2,3]))),T=t.lazy(()=>h(()=>import("./EditarButton-BGLe7PRA.js"),__vite__mapDeps([10,1,2,11]))),O=()=>{const[c,l]=t.useState([]),[r,a]=t.useState(!1),[v,x]=t.useState(null),{user:i}=t.useContext(E);t.useEffect(()=>{(async()=>{const n=p.get("authToken");if(!n){console.error("No token found");return}if(!i||!i._id){console.error("User not loaded or missing ID");return}try{const u=await(await fetch("http://52.14.179.20/events",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}})).json(),g=Array.isArray(u)?u.filter(N=>N.organizadores.some(b=>b.uid===i._id)):[];l(g)}catch(o){console.error("Error fetching events:",o)}})()},[i]);const m=s=>{x(s),a(!0)},d=()=>{x(null),a(!1)},j=()=>{window.location.href="/eventos/novo"};return e.jsxs(t.Suspense,{fallback:e.jsx("div",{children:"Carregando..."}),children:[e.jsx(A,{user:i,token:p.get("authToken")}),e.jsx("div",{className:"upcoming-events-container",children:c.length>0?c.map(s=>e.jsx("div",{className:"event",style:{backgroundImage:`url(${s.fotoUrl||k})`},children:e.jsxs("div",{className:"event-overlay",children:[e.jsxs("div",{className:"event-content",children:[e.jsx("div",{className:"event-title",children:e.jsx("h2",{children:s.nome})}),e.jsxs("div",{className:"event-description",children:[e.jsx("p",{className:"event-descricao",children:s.descricao.length>244?`${s.descricao.substring(0,241)}...`:s.descricao}),e.jsx("p",{children:e.jsx("br",{})}),e.jsxs("p",{children:[s.endereco.cidade," - ",s.endereco.estado]})]}),e.jsx("div",{className:"event-details",children:s.dataEvento&&s.dataEvento.map((n,o)=>e.jsxs("div",{className:"event-date",children:[e.jsx("p",{className:"date",children:new Date(n.dataAbertura).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),e.jsx("p",{className:"time",children:n.horaAbertura}),e.jsx("p",{className:"time",children:n.horaFechamento})]},o))})]}),e.jsx("div",{className:"event-likes",onClick:n=>n.stopPropagation(),children:e.jsx(z,{eventId:s._id,initialLikesCount:s.numeroFavoritos})}),e.jsx("div",{className:"event-barracas",children:e.jsx(T,{label:"Editar evento",size:"40px",onClick:()=>m(s._id)})})]})},s._id)):e.jsxs("div",{className:"no-events-container",children:[e.jsx("h1",{className:"no-events-text",children:"Você não tem nenhum evento cadastrado"}),e.jsx("button",{className:"create-event-button",onClick:j,children:"Cadastre um evento"})]})}),r&&e.jsx(y,{isOpen:r,onRequestClose:d,eventId:v})]})};export{O as default};
