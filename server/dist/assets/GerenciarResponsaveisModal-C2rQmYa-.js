import{r as t,j as r,b as n}from"./index-CX-r_TzI.js";import{M as l}from"./index-DQ8UN3GZ.js";l.setAppElement("#root");const E=({isOpen:d,onRequestClose:s,eventId:i,organizadores:h})=>{const[m,p]=t.useState(""),[x,j]=t.useState([]),[u,c]=t.useState(!1),g=async e=>{if(e.length===5){c(!0);try{const a=n.get("authToken"),y=await(await fetch(`http://52.14.179.20/users/search?identifier=${e}`,{headers:{Authorization:`Bearer ${a}`}})).json();j(y||[])}catch(a){console.error("Erro ao buscar usuários:",a)}finally{c(!1)}}},v=async e=>{try{const a=n.get("authToken");await fetch(`http://52.14.179.20/events/${i}/organizadores/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}),alert("Organizador inativado com sucesso."),s()}catch(a){console.error("Erro ao inativar organizador:",a)}},f=async e=>{const a={nome:e.displayName,email:e.email,fotoUrl:e.photoURL,uid:e.identifier,status:"Ativo"};try{const o=n.get("authToken");await fetch(`http://52.14.179.20/events/${i}/organizadores`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({organizadores:[a]})}),alert("Organizador adicionado com sucesso."),s()}catch(o){console.error("Erro ao adicionar organizador:",o)}};return r.jsx(l,{isOpen:d,onRequestClose:s,className:"full-screen-modal",overlayClassName:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{className:"close-button orange",onClick:s,children:"X"}),r.jsx("h2",{children:"Gerenciar Responsáveis"}),r.jsx("h3",{children:"Responsáveis Ativos"}),r.jsx("ul",{children:h.filter(e=>e.status==="Ativo").map((e,a,o)=>r.jsxs("li",{children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Nome:"})," ",e.nome," ",r.jsx("br",{}),r.jsx("strong",{children:"Email:"})," ",e.email]}),o.length>1&&r.jsx("button",{onClick:()=>v(e._id),children:"Apagar Organizador"})]},e._id))}),r.jsx("h3",{children:"Adicionar Novo Responsável"}),r.jsx("input",{type:"text",value:m,onChange:e=>{const a=e.target.value.trim();p(a),g(a)},placeholder:"Digite o identificador do usuário"}),u&&r.jsx("p",{children:"Carregando..."}),r.jsx("ul",{children:x.map(e=>r.jsxs("li",{children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Nome:"})," ",e.displayName," ",r.jsx("br",{}),r.jsx("strong",{children:"Email:"})," ",e.email," ",r.jsx("br",{})]}),r.jsx("button",{disabled:!e.emailVerified,onClick:()=>f(e),children:"Tornar este usuário administrador"})]},e._id))})]})})};export{E as default};
