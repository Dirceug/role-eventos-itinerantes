import{u as v,r as d,U as x,j as e,b as y}from"./index-CX-r_TzI.js";import{J as o}from"./joi-browser.min-DHFZ_MUq.js";import{L as s}from"./LabelInput-CMyMSPkc.js";import{B as C}from"./ButtonGrande-fEAYhVl3.js";/* empty css              */const f=o.object({tipo:o.string().required().label("Tipo").messages({"string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),cep:o.string().pattern(/^\d{5}-\d{3}$/).required().label("CEP").messages({"string.pattern.base":"{#label} deve estar no formato 00000-000.","string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),rua:o.string().required().label("Rua").messages({"string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),numero:o.string().required().label("Número").messages({"string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),complemento:o.string().allow("").label("Complemento"),referencia:o.string().allow("").label("Referência"),bairro:o.string().required().label("Bairro").messages({"string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),cidade:o.string().required().label("Cidade").messages({"string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."}),estado:o.string().required().label("Estado").messages({"string.empty":"{#label} não pode estar vazio.","any.required":"{#label} é obrigatório."})});function N(){const c=v(),{user:m}=d.useContext(x),[a,u]=d.useState({tipo:"Casa",cep:"",rua:"",numero:"",complemento:"",referencia:"",bairro:"",cidade:"",estado:""}),[t,p]=d.useState({}),n=r=>{const{name:l,value:i}=r.target;u(h=>({...h,[l]:i}))},b=()=>{const r=f.validate(a,{abortEarly:!1});if(!r.error)return p({}),!0;const l={};for(let i of r.error.details)l[i.path[0]]=i.message;return p(l),!1},g=async()=>{if(b())try{const r=y.get("authToken");(await fetch("${process.env.REACT_APP_API_URL}/users/updateAddress",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({email:m.email,...a})})).ok?c("/cadastro/dadosbancarios"):console.error("Erro ao atualizar endereço")}catch(r){console.error("Erro ao atualizar endereço:",r)}};return e.jsxs("div",{className:"paginaCadastro",children:[e.jsx("h1",{children:"Atualizar Endereço"}),e.jsxs("div",{className:"cinquentaPorCento",children:[e.jsx(s,{label:"Tipo:",type:"text",placeholder:"Tipo",name:"tipo",value:a.tipo,onChange:n,error:t.tipo}),e.jsx(s,{label:"CEP:",type:"text",placeholder:"00000-000",name:"cep",value:a.cep,onChange:r=>{const l=r.target.value.replace(/\D/g,"").replace(/(\d{5})(\d)/,"$1-$2");n({target:{name:"cep",value:l}})},error:t.cep}),e.jsx(s,{label:"Rua:",type:"text",placeholder:"Nome da Rua ou Avenida",name:"rua",value:a.rua,onChange:n,error:t.rua}),e.jsx(s,{label:"Número:",type:"text",placeholder:"000",name:"numero",value:a.numero,onChange:n,error:t.numero}),e.jsx(s,{label:"Complemento:",type:"text",placeholder:"Ap 12 Bloco 7",name:"complemento",value:a.complemento,onChange:n,error:t.complemento}),e.jsx(s,{label:"Ponto de Referência:",type:"text",placeholder:"Perto de ****",name:"referencia",value:a.referencia,onChange:n,error:t.referencia}),e.jsx(s,{label:"Bairro:",type:"text",placeholder:"Nome do Bairro",name:"bairro",value:a.bairro,onChange:n,error:t.bairro}),e.jsx(s,{label:"Cidade:",type:"text",placeholder:"Franca",name:"cidade",value:a.cidade,onChange:n,error:t.cidade}),e.jsx(s,{label:"Estado:",type:"text",placeholder:"São Paulo",name:"estado",value:a.estado,onChange:n,error:t.estado})]}),e.jsx(C,{onClick:g,className:"invertido",children:"Enviar Endereço"})]})}export{N as default};
