const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Navbar-CfGvtLrd.js","assets/index-CX-r_TzI.js","assets/index-9u-HInou.css","assets/index-e84cf44d-BDGxaeLU.js","assets/Navbar-C1qii9T-.css"])))=>i.map(i=>d[i]);
import{r as t,U as E,j as s,b as u,_ as S}from"./index-CX-r_TzI.js";import{l as _}from"./lodash-liJYcMBj.js";const y=t.lazy(()=>S(()=>import("./Navbar-CfGvtLrd.js"),__vite__mapDeps([0,1,2,3,4]))),k=()=>{const[m,p]=t.useState(""),[l,i]=t.useState([]),[h,o]=t.useState([]),[x,c]=t.useState(!1),[d,r]=t.useState(""),{user:g}=t.useContext(E),j=async e=>{if(e.length<2){r("Digite pelo menos 2 caracteres para buscar."),i([]),o([]);return}c(!0),r("");try{const a=u.get("authToken"),n=await(await fetch(`http://52.14.179.20/users/search?identifier=${e}`,{headers:{Authorization:`Bearer ${a}`}})).json();n?(i([n]),o([]),e.length===5&&r("Busca por correspondência exata.")):(i([]),r("Nenhum usuário encontrado."))}catch(a){console.error("Erro ao buscar usuários:",a),r("Erro ao buscar usuários.")}finally{c(!1)}},f=async e=>{if(e.length>=2){c(!0);try{const a=u.get("authToken"),n=await(await fetch(`http://52.14.179.20/users/search?identifier=${e}`,{headers:{Authorization:`Bearer ${a}`}})).json();n&&o([n])}catch(a){console.error("Erro ao buscar sugestões:",a),o([])}finally{c(!1)}}},N=t.useCallback(_.debounce(e=>j(e),2e3),[]),b=e=>{const a=e.target.value.trim();p(a),a.length>=2?(f(a),N(a)):(o([]),i([]),r("Digite pelo menos 2 caracteres para buscar."))};return s.jsxs(t.Suspense,{fallback:s.jsx("div",{children:"Carregando..."}),children:[s.jsx(y,{user:g}),s.jsxs("div",{className:"users-container",children:[s.jsx("h1",{className:"titulo",children:"Busca de Usuários"}),s.jsx("input",{type:"text",value:m,onChange:b,placeholder:"Digite o código do usuário",className:"search-input"}),x&&s.jsx("p",{children:"Carregando..."}),d&&s.jsx("p",{className:"message",children:d}),s.jsxs("div",{className:"resultado",children:[s.jsx("h3",{children:"Resultados:"}),l.length>0?s.jsx("ul",{children:l.map(e=>s.jsxs("li",{className:"parametros",children:[s.jsxs("div",{className:"detalhes",children:[s.jsx("strong",{children:"Nome:"})," ",e.displayName," ",s.jsx("br",{}),s.jsx("strong",{children:"Email:"})," ",e.email," ",s.jsx("br",{})]}),s.jsx("div",{className:"photo",children:s.jsx("img",{src:e.photoURL,alt:e.displayName,className:"user-photo"})})]},e._id))}):s.jsx("p",{children:"Nenhum usuário encontrado."})]}),s.jsx("div",{children:h.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{children:"Sugestões:"}),s.jsx("ul",{children:h.map(e=>s.jsxs("li",{children:[s.jsx("strong",{children:"Nome:"})," ",e.displayName," ",s.jsx("br",{}),s.jsx("strong",{children:"Email:"})," ",e.email]},e._id))})]})})]})]})};export{k as default};
